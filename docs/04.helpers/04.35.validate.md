validate()
----------

The **validate()** helper is a custom-built form validation utility designed to check incoming request data against a set of user-defined rules. It mimics the behavior of validation systems found in larger frameworks **(like Laravel)** but is simple, lightweight, and fully decoupled — making it ideal for smaller or custom PHP frameworks like **VeltoPHP.**

Its purpose is to prevent bad data from entering your application, which could lead to bugs, database errors, or security issues.


How validate() Works – Internals Explained
------------------------------------------

**Takes 2 Parameters**

- **$data**: the actual data to validate **(e.g. from a form)**.

- **$rules**: the validation rules for each field.


```bash

$data = [
  'email' => 'test@example.com',
  'password' => 'secret123',
];

$rules = [
  'email' => 'required|email',
  'password' => 'required|string|min:6',
];


```

Iterates Through Each Field & Rule
----------------------------------

The function loops through each key **(e.g. email, password)** and breaks the rule string into an array using **explode('|', $rule)**:

```bash

['required', 'email']

```

This lets us check each validation rule independently.


Parses Rules Like min:6
-----------------------

Some rules have parameters (e.g. min:6, same:password), so it uses explode(':', $ruleItem) to extract:

- Rule name **(e.g. min)**

- Rule parameter **(e.g. 6)**


Supported Rules:
----------------


**required** – field must be present and not empty.

**string** – must be a string.

**integer** – must be a valid integer.

**boolean** – must be a boolean (true/false or 1/0).

**array** – must be an array.

**min:value** – minimum length (for strings) or minimum number (for numerics).

**max:value** – maximum length (for strings) or maximum number (for numerics).

**email** – must be a valid email format.

**numeric** – must be a number.

**confirmed** – must have a matching <field>_confirmation.

**same:other_field** – must match another field’s value.

**in:opt1,opt2** – value must be in the specified list.

**image** – must be a valid uploaded image file (JPEG, PNG, GIF, WEBP).



Example Usage in a Controller: contactSend()
--------------------------------------------

```bash

public function contactSend()
{
    $request = request()->all();

    $errors = validate($request, [
        'name' => 'required|string|min:3',
        'email' => 'required|email',
        'message' => 'required|string|max:160',
    ]);

    if (!empty($errors)) {
        flash()->error($errors);
        return to_route('contact');
    }

    # continue processing (e.g., store in DB or send email)
}


```


Explanation:
------------

**1. Getting Input Data**

```bash
$request = request()->all();
```

This line retrieves all input data from the current request — typically from a POST form submission.



**2. Validating the Data**

```bash
$errors = validate($request, [...]);
```

Here, the data is passed to the **validate()** function along with an array of rules. The rules specify:

- **'name'** must be:
    - present (required)
    - a string
    - at least 3 characters


- **'email'** must be:
    - present
    - a valid email format


- **'message'** must be:
    - present
    - a string
    - no more than 160 characters

If validation fails, an array of error messages will be returned. If everything passes, the **$errors** will be **null**.


**3. Handling Validation Errors**

```bash
if (!empty($errors)) {
    flash()->error($errors);
    return to_route('contact');
}
```

This block checks if validation failed. If so:

- It stores the error messages using **flash()->error($errors)**. This saves the messages temporarily in the session.

- Then, it redirects the user back to the **'contact'** route (usually a form page).

The use of **flash()** makes it possible to persist the errors only for the next request, so they can be shown in the view after redirect.


Displaying Error Messages in the View
-------------------------------------

```bash

# In views/contact.vel.php or any other template
<div>@flash_errors</div>

```


Explanation:
-------------

VeltoPHP includes a simple templating syntax. Here, **@flash_errors** is a custom directive that renders all flashed error messages automatically.


**For example, if validation failed with:**

```bash

[
    'name' => ['name is required.'],
    'email' => ['email must be a valid email address.']
]


```

The **@flash_errors** directive will produce something like:

```bash

<div>
    <p>name is required.</p>
    <p>email must be a valid email address.</p>
</div>


```

Summary
--------

**Validation**	Ensures incoming data is clean and meets requirements

**Flash Error**	Temporarily stores error messages in session

**Redirect**	Sends user back to the form to fix errors

**View Directive**	**@flash_errors** renders all flashed error messages automatically


This workflow provides a smooth, user-friendly validation experience — helping both developers and users catch mistakes early without complex setup.