redirect()
----------


The **redirect()** function is designed to simplify how you send users from one page to another, especially after submitting forms, handling validation, or processing logic that needs to return the user elsewhere.

It's very similar to what you'd find in Laravel, but customized for your own framework, VeltoPHP.

**What This Function Does**

This function does three things in one compact tool:

- Flashes temporary data to session — **e.g., errors or success** messages.
- Returns an object with fluent redirect methods — like **.to(), .back(), or .route()**.
- Handles redirect immediately if you just call **redirect()** without chaining anything.


Step-by-Step Explanation
------------------------


**Step 1: Start the Session & Flash Data**

```bash
Session::start();

if (!empty($data)) {
    $_SESSION['_flash'] = $data;
}
```

Before any redirect, it ensures the session is started **(using your custom Session::start() method)**.

Then, if you provide flash data **(like an error or message)**, it's stored temporarily in the session using the **key _flash.**

Flash data is typically used to display temporary messages on the next page load, like:

- Form validation errors
- Success messages
- Alert notifications


**Step 2: Return a Redirect Object**

Now here's the cool part — the function returns an anonymous class with built-in redirect logic. You can call methods like:

```bash
->to('/thank-you')

->back()

->route('dashboard')
```

This gives you a chainable and expressive redirect interface.


Methods in the Anonymous Redirect Class
----------------------------------------

**->to($url)**

```bash
redirect()->to('/thank-you');
```

Manually redirect to any path or URL. It sends an HTTP Location header and immediately stops the script with exit.


**->back()**

```bash
redirect()->back();
```

Automatically redirects the user back to the previous page, based on **$_SERVER['HTTP_REFERER']**. If the referer is not valid or missing, it redirects **to / as a fallback**.


**->route($name, $params)**

```bash
redirect()->route('user.profile', ['id' => 5]);
```

Redirects to a named route using a helper like **route()** — this assumes you're using route definitions in your app, similar to Laravel’s route naming system.


**__destruct() (Automatic Redirect)**

```bash
redirect('/success');
```

This line works even without calling .to() because of the __destruct() magic method. When the returned object is destroyed (right after this line finishes), the header() call is automatically triggered.

So this is equivalent to:

```bash
redirect()->to('/success');
```

Why this is smart: it allows for shorthand redirects, and still handles them safely and consistently.



Example: Redirect with Validation Errors
----------------------------------------

Let’s say a user submits a contact form:

```bash

public function contactSend()
{
    $request = request()->all();

    $errors = validate($request, [
        'name' => 'required|string|min:3',
        'email' => 'required|email',
        'message' => 'required|string|max:160',
    ]);

    if (!empty($errors)) {
        return redirect('/contact', ['errors' => $errors]);
    }

    # send email or process the request...
    return redirect('/thank-you', ['success' => 'Your message has been sent!']);
}


```


Now, in your view (.vel.php), you can show flash messages using:
```bash
<div>@flash_errors</div>
```